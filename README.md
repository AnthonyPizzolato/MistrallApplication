
# MISTRAL Chatbot Application

> A chatbot application that takes PDF or DOCX files from the local directory, generates a study guide, and optionally creates practice questions based on the content. The application leverages efficient document chunking for optimized tokenization and processing by a language model (LLM).

---

## Table of Contents
- [Overview](#overview)
- [Features](#features)
- [Prerequisites](#prerequisites)
- [Installation](#installation)
- [Setup on AWS EC2](#setup-on-aws-ec2)
- [Usage](#usage)
- [Testing](#testing)
- [Troubleshooting](#troubleshooting)
- [Contributing](#contributing)
- [License](#license)

---

## Overview

The MISTRAL Chatbot Application allows users to upload educational documents (PDF/DOCX) and receive tailored study guides or study guides with practice questions generated by a large language model (LLM). It leverages libraries such as `vllm`, `PyTorch`, `transformers`, `pypdf2`, and `python-docx`.

## Features
- **Document Upload**: Accepts PDF and DOCX formats for file processing.
- **Study Guide Generation**: Extracts key concepts and summaries from the document.
- **Practice Questions Creation**: Optionally generates practice questions for effective learning.
- **Efficient Tokenization**: Uses document chunking for optimized LLM performance.

---

## Prerequisites

Ensure the following are installed:
- **Python 3.10**
- **Hugging Face Hub** for model hosting ([sign up here](https://huggingface.co/))
- An **AWS account** for EC2 setup (if using a cloud GPU instance)
- SSH client installed (e.g., Linux, macOS Terminal, Git Bash/WSL on Windows)

---

## Installation

Follow these steps to set up the MISTRAL Chatbot Application locally.

### Step 1: Clone the Repository
```bash
git clone https://github.com/AnthonyPizzolato/MistrallApplication.git
cd MistrallApplication
```

### Step 2: Install Dependencies
```bash
pip install vllm torch
pip install pypdf2 python-docx
pip install ipywidgets==7.7.1 transformers huggingface_hub
```

### Step 3: Log in to Hugging Face Hub
Create an access token [here](https://huggingface.co/docs/hub/en/security-tokens) if you don't have one:
```bash
huggingface-cli login
```
When prompted, input "Yes" to add the token as a git credential.

---

## Setup on AWS EC2

This guide helps you set up the application on an Amazon EC2 instance with GPU for efficient model inference.

### Step 1: Launch an Amazon EC2 GPU Instance
1. Log in to your AWS account and navigate to the **EC2 Dashboard**.
2. Click on **Launch Instance** and select a GPU instance (e.g., `g4dn.xlarge` or `p3.2xlarge`).
3. Configure storage (at least 100 GB recommended).
4. Launch the instance and download the SSH key pair (`.pem` file).

### Step 2: Connect to Your EC2 Instance
```bash
chmod 400 your-key-file.pem
ssh -i your-key-file.pem ec2-user@your-ec2-ip
```

### Step 3: Set Up the EC2 Environment
```bash
sudo apt update && sudo apt upgrade -y
sudo apt install python3-pip git -y
```

Clone the VLLM repository:
```bash
git clone https://github.com/vllm-project/vllm.git
cd vllm
pip install -r requirements.txt
```

### Step 4: Upload Files to EC2
Transfer files from your local machine:
```bash
scp -i your-key-file.pem local-file-path ec2-user@your-ec2-ip:/home/ec2-user/
```

Verify the uploaded files:
```bash
ls /home/ec2-user/
```

### Step 5: Run the Study Guide Generation
```bash
python generate_study_guide.py --input-file /home/ec2-user/input-file.txt
```

### Tips
- Ensure the EC2 instance has enough GPU resources.
- Shut down the EC2 instance after use to avoid extra charges:
```bash
aws ec2 stop-instances --instance-ids i-xxxxxxxxxxxxxxxxx
```

---

## Usage

### Basic Usage
1. Place your **PDF** or **DOCX** file in the root directory of the project.
2. Run the main application script:
   ```bash
   python mistral.py
   ```

### Example Commands
Generate a study guide:
```bash
python main.py
```

---

## Testing

Testing ensures the application's functionality and compatibility with different document types.

### End-to-End Testing
- Prepare sample documents and run the application end-to-end.
- Verify the generated study guide and practice questions.

### Unit Tests
Run unit tests using `pytest`:
```bash
pytest tests/
```

Unit tests cover:
- Document parsing
- Document chunking
- Output generation

---

## Troubleshooting

### Common Issues

- **Permission Denied (SSH)**: Ensure your `.pem` file has the correct permissions:
  ```bash
  chmod 400 your-key-file.pem
  ```

- **Out of Memory Error**: Consider using a larger instance type with more GPU memory.

- **Missing Dependencies**: Check and install any missing packages from `requirements.txt`.

---

## Contributing

Contributions are welcome! Feel free to submit issues, fork the repository, and create pull requests.

---

## License

This project is licensed under the [MIT License](LICENSE).

---

This revision improves clarity, organization, and flow, making it easier to follow. Let me know if you need further adjustments!

